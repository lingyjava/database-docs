# 4·MySQL常见问题

- [4·MySQL常见问题](#4mysql常见问题)
  - [死锁](#死锁)
    - [解决方式](#解决方式)

## 死锁
曾出现过的场景：
- 护网导致调的第三方接口超时，同时用户在前端发送多次请求。前一次请求在事务中已修改部分表数据，在Rollback时遇到后一次请求中修改相同行的数据，导致死锁。
**经验：**
1. 调第三方接口设置较短超的超时时间。
2. 调第三方接口不设置在事务中。
3. 事务中的过程应简洁，迅速，处理数据程序放在事务外处理。
4. 可以使用多线程去处理调第三方接口。

### 解决方式
1. 查询进程，根据Time可知被阻塞的进程ID。
`show processlist`

2. 关闭进程。
`kill [id]`
